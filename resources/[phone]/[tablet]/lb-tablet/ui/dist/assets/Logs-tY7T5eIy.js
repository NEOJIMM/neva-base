import{u as T,r as l,L as o,h as f,G as d,j as a,m as b,a as n,H as w,bf as C,c as N,bh as E,a8 as D,K as G,a5 as V}from"./index-B-vcvQz_.js";import{g as x,A as p,a as F,V as P,S as R}from"./Ambulance-Dl73Nu8C.js";const g=G([]);function z(){const i=T(g),[u,L]=l.useState(""),[m,A]=l.useState("");l.useState({});const[I,h]=l.useState(!1),[O,S]=l.useState(!1);let v={create:{label:o("APPS.POLICE.LOGS.CREATED"),color:"green"},update:{label:o("APPS.POLICE.LOGS.UPDATED"),color:"orange"},delete:{label:o("APPS.POLICE.LOGS.DELETED"),color:"red"}};l.useEffect(()=>{const e=setTimeout(()=>L(m),500);return()=>clearTimeout(e)},[m]),l.useEffect(()=>{h(!1),f("Ambulance",{action:"getLogs",query:u},p.logs).then(e=>{if(!e)return d("warning","No logs found");g.set(e)})},[u]);const y=()=>{if(I||O)return;let e=document.querySelector("#last");if(!e)return;!V(e)&&(S(!0),f("Ambulance",{action:"getLogs",query:u,lastId:i[i.length-1].id},null).then(t=>{t&&t.length>0?(g.set([...i,...t]),S(!1),t.length<10&&h(!0)):h(!0)}))},r={report:{action:"getReport",mock:p.reports,cb:e=>{F.set(e),P.set("reports")}},profile:{action:"getProfile",mock:p.profiles,cb:e=>{R.set(e),P.set("profiles")}}},k=(e,s)=>{var t;if(!e||!s)return d("warning","No type or id provided");f("Ambulance",{action:r[e].action,id:s},(t=r[e])==null?void 0:t.mock.find(c=>c.id===s)).then(c=>{if(!c)return d("warning","No data found");r[e].cb(c)})};return a(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{ease:"easeInOut",duration:.25},className:"policepage-container",children:a("main",{className:"main profiles",children:n("div",{className:"page",children:[a("div",{className:"top",children:a("div",{className:"title",children:o("APPS.POLICE.LOGS.TITLE")})}),a(w,{placeholder:"Search",onChange:e=>A(e.target.value)}),a("div",{className:"items",onScroll:y,children:i.map((e,s)=>{var c;let t=s===i.length-1?"last":"";return n(b.div,{...C,id:t,className:"item","data-clickable":"false",children:[a("img",{src:x(e.avatar)}),n("div",{className:"info",children:[n("div",{className:"name",children:[N(e.type),' - "',e.title,'"']}),e.description&&a("div",{className:"subtitle",children:e.description.substring(0,150)}),n("div",{className:"cards",children:[a("div",{className:E("card",v[e.action].color),children:v[e.action].label}),e.action!=="delete"&&(r==null?void 0:r[e.type])&&a("div",{className:E("card blue clickable"),onClick:()=>{if(e.action!=="delete"){if(!e.type||!e.relatedId)return d("warning","No type or id provided");k(e.type,e.relatedId)}},children:o("APPS.POLICE.LOGS.VIEW_FOOTER",{type:N(e.type),id:(c=e==null?void 0:e.relatedId)==null?void 0:c.toString()})})]}),n("div",{className:"id",children:[a("div",{className:"label",children:e.username}),a("div",{children:" - "}),a("div",{className:"value",children:D(e.timestamp)})]})]})]},s)})})]})})})}export{z as default};
