import{u as C,r as c,L as i,h as v,G as f,j as a,m as E,a as r,H as T,bf as D,bD as G,c as N,bh as L,a8 as R,K as V,a5 as F,bF as n,bG as x,bH as h,bN as j,bQ as q,bR as H}from"./index-B-vcvQz_.js";import{ActiveWarrant as W}from"./Warrants-XdZHY-v5.js";const S=V([]);function M(){const o=C(S),[g,I]=c.useState(""),[b,O]=c.useState("");c.useState({});const[y,p]=c.useState(!1),[A,P]=c.useState(!1);let m={create:{label:i("APPS.POLICE.LOGS.CREATED"),color:"green"},update:{label:i("APPS.POLICE.LOGS.UPDATED"),color:"orange"},delete:{label:i("APPS.POLICE.LOGS.DELETED"),color:"red"}};c.useEffect(()=>{const e=setTimeout(()=>I(b),500);return()=>clearTimeout(e)},[b]),c.useEffect(()=>{p(!1),v("Police",{action:"getLogs",query:g},n.logs).then(e=>{if(!e)return f("warning","No logs found");S.set(e)})},[g]);const k=()=>{if(y||A)return;let e=document.querySelector("#last");if(!e)return;!F(e)&&(P(!0),v("Police",{action:"getLogs",query:g,lastId:o[o.length-1].id},null).then(t=>{t&&t.length>0?(S.set([...o,...t]),P(!1),t.length<10&&p(!0)):p(!0)}))},l={report:{action:"getReport",mock:n.reports,cb:e=>{x.set(e),h.set("reports")}},case:{action:"getCase",mock:n.cases,cb:e=>{j.set(e),h.set("cases")}},warrant:{action:"getWarrant",mock:n.warrants,cb:e=>{W.set(e),h.set("warrants")}},profile:{action:"getProfile",mock:n.profiles,cb:e=>{q.set(e),h.set("profiles")}},vehicle:{action:"getVehicle",mock:n.vehicles,cb:e=>{H.set(e),h.set("vehicles")}}},w=(e,s)=>{var t,d;if(!e||!s)return f("warning","No type or id provided");v("Police",{action:(t=l[e])==null?void 0:t.action,id:s},(d=l[e])==null?void 0:d.mock.find(u=>u.id===s)).then(u=>{if(!u)return f("warning","No data found");l[e].cb(u)})};return a(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{ease:"easeInOut",duration:.25},className:"policepage-container",children:a("main",{className:"main profiles",children:r("div",{className:"page",children:[a("div",{className:"top",children:a("div",{className:"title",children:i("APPS.POLICE.LOGS.TITLE")})}),a(T,{placeholder:i("APPS.POLICE.LOGS.SEARCH"),onChange:e=>O(e.target.value)}),a("div",{className:"items",onScroll:k,children:o.map((e,s)=>{var d;let t=s===o.length-1?"last":"";return r(E.div,{...D,id:t,className:"item","data-clickable":"false",children:[a("img",{src:G(e.avatar,e.type)}),r("div",{className:"info",children:[r("div",{className:"name",children:[N(e.type),' - "',e.title,'"']}),a("div",{className:"subtitle",children:e.description.substring(0,150)}),r("div",{className:"cards",children:[a("div",{className:L("card",m[e.action].color),children:m[e.action].label}),e.action!=="delete"&&(l==null?void 0:l[e.type])&&a("div",{className:L("card blue clickable"),onClick:()=>{if(e.action!=="delete"){if(!e.type||!e.relatedId)return f("warning","No type or id provided");w(e.type,e.relatedId)}},children:i("APPS.POLICE.LOGS.VIEW_FOOTER",{type:N(e.type),id:(d=e==null?void 0:e.relatedId)==null?void 0:d.toString()})})]}),r("div",{className:"id",children:[a("div",{className:"label",children:e.username}),a("div",{children:" - "}),a("div",{className:"value",children:R(e.timestamp)})]})]})]},s)})})]})})})}export{M as default};
