import{u as C,r as c,h as O,G as f,k as S,j as a,m as A,a as r,L as o,H as k,bh as L,bM as x,g as M,b3 as T,K as R}from"./index-B-vcvQz_.js";import{g as j,A as m}from"./Ambulance-Dl73Nu8C.js";const u=R([]);function w(){var h,E;const N=C(u),[g,P]=c.useState([]),[l,v]=c.useState({}),[d,b]=c.useState("ambulance"),[n,p]=c.useState("");return c.useEffect(()=>{O("Ambulance",{action:"getEmployees"},{employees:m.employees,ranks:m.ranks,labels:m.labels}).then(e=>{if(!e)return f("warning","No employees returned from server");u.set(e.employees),P(e.ranks),v(e.labels),b(Object.keys(e.labels)[0])})},[]),S("ambulance:updateCallsign",e=>{if(!e)return f("error","No data received for police:updateCallsign");u.set(t=>{const s=t.findIndex(i=>i.id===e.identifier);return s===-1?t:(t[s].callsign=e.callsign,[...t])})}),a(A.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{ease:"easeInOut",duration:.25},className:"policepage-container",children:a("main",{className:"main offences",children:r("div",{className:"page",children:[r("div",{className:"top",children:[a("div",{className:"title",children:o("APPS.AMBULANCE.EMPLOYEES.TITLE")}),Object.keys(l).length>1&&a("div",{className:"selector",children:Object.keys(l).sort((e,t)=>l[e].localeCompare(l[t])).map(e=>a("div",{className:"option","data-active":d===e,onClick:()=>b(e),children:l[e]},e))})]}),a(k,{placeholder:o("APPS.AMBULANCE.EMPLOYEES.SEARCH"),onChange:e=>p(e.target.value)}),a("div",{className:"items",children:(E=(h=g[d])==null?void 0:h.sort((e,t)=>t.grade-e.grade))==null?void 0:E.map(e=>{if(N.filter(s=>{var i;return s.rank===e.grade&&s.job===d&&((i=s==null?void 0:s.name)==null?void 0:i.toLowerCase().includes(n==null?void 0:n.toLowerCase()))}).length>0)return r("div",{className:"grid-item",children:[a("div",{className:"top",children:a("div",{className:"title",children:e.label})}),a("div",{className:"items",style:{padding:"0 0.5rem"},children:N.filter(s=>s.rank===e.grade&&s.job===d).filter(s=>{var i;return(i=s==null?void 0:s.name)==null?void 0:i.toLowerCase().includes(n==null?void 0:n.toLowerCase())}).map((s,i)=>r("div",{className:"item profile",children:[a("div",{className:L("status",s.onDuty?"online":"offline")}),a("img",{src:j(s.avatar)}),r("div",{className:"info",children:[a("div",{className:"name",children:s.name}),a("div",{className:"subtitle",children:s.callsign}),s.phoneNumber&&a("div",{className:"phone",onClick:()=>{x(s.phoneNumber),M.PopUp.set({title:o("COMPONENTS.SHARE.COPY_POPUP.TITLE"),description:o("COMPONENTS.SHARE.COPY_POPUP.DESCRIPTION"),buttons:[{title:o("COMPONENTS.SHARE.COPY_POPUP.OK")}]})},children:T(s.phoneNumber)})]})]},i))})]},e.grade)})})]})})})}export{w as default};
