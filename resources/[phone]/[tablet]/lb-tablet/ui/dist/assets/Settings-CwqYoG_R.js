import{r as m,j as e,I as H,u as p,a as i,F as T,L as s,S as t,c as V,C as $,b as C,d as W,e as j,f as k,g as w,h as b,l as Y,i as L,M as z,k as D,m as R,n as M,o as q,p as U,q as G,T as K,s as Z,t as J,v as X,w as x,x as Q,y as ee,z as ae,A as se,B as ne,D as ie,E as te,G as O,H as le,J as ce,K as B,N as re}from"./index-B-vcvQz_.js";function F(a){const[l,r]=m.useState(a.value),[S,c]=m.useState(_(l,a.min,a.max));return e(H,{type:"range",className:"sliderInput",min:a.min,max:a.max,defaultValue:l,step:a.step,onChange:d=>{let N=parseFloat(d.target.value);r(N),a.onChange(N),c(_(parseFloat(d.target.value),a.min,a.max))},style:{background:`linear-gradient(to right, #0a84ff 0%, #0a84ff ${S}%, #636366 ${S}%, #636366 100%)`}})}function _(a,l,r,S){var c=(a-l)*100/(r-l);return c>100?c=100:c<0&&(c=0),c}function oe(){const a=p(t),l=["#39334d","#465281","#87855e","#4b6a45","#702e2e","picker"];return i(T,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.APPEARANCE")}),i("section",{children:[e("div",{className:"settings-item",children:e("div",{className:"appearance-container",children:e("div",{className:"appearance-switches",children:["light","dark"].map((r,S)=>i("div",{className:"mode",onClick:()=>{t.set({...t.value,display:{...a.display,theme:r}})},children:[e("img",{src:`./assets/img/${r}-mode-placeholder.png`,alt:"Theme"}),e("div",{className:"mode-text",children:V(r)}),e($,{checked:a.display.theme===r})]},S))})})}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.AUTOMATIC")})}),e("div",{className:"setting-value",children:e(C,{onChange:()=>{t.set({...t.value,display:{...a.display,automatic:!a.display.automatic}})}})})]})]}),e("div",{className:"category-title",children:s("APPS.SETTINGS.BRIGHTNESS")}),e("section",{children:i("div",{className:"settings-item",children:[e(W,{}),e(F,{onChange:r=>{t.set({...t.value,display:{...a.display,brightness:r}})},value:a.display.brightness,min:.1,max:1,step:.01}),e(j,{})]})}),k.value.AllowFrameColorChange&&i(T,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.FRAME_COLOR")}),e("section",{children:e("div",{className:"settings-item",children:e("div",{className:"colors",children:l.map((r,S)=>{let c=r==="picker";return e("div",{className:"color",style:{backgroundImage:c&&"url(./assets/img/icons/picker.png)",boxShadow:!c&&`inset 0 0.1rem 5rem ${r}, 0 0 0 0.15rem hsl(254, 30%, 85%)`},"data-active":a.display.frameColor===r,onClick:()=>{if(c){w.ColorPicker.set({onSelect:d=>{t.set({...t.value,display:{...a.display,frameColor:d}})}});return}else t.set({...t.value,display:{...a.display,frameColor:r}})}},S)})})})})]})]})}function de(){const a=p(t);return i(T,{children:[e("div",{className:"category-title",children:"Software Update"}),e("section",{children:i("div",{className:"settings-item",style:{cursor:"pointer"},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.AUTOMATIC_UPDATES")})}),e("div",{className:"setting-value",children:e("div",{className:"value",children:s("APPS.SETTINGS.OFF")})})]})}),a.version!==a.latestVersion&&e("section",{children:i("div",{className:"settings-item",style:{flexDirection:"column",alignItems:"inherit",gap:"0.75rem"},children:[i("div",{className:"item-header",children:[e("img",{src:"./assets/img/icons/lbos.webp"}),i("div",{className:"info",children:[e("div",{className:"title",children:a.latestVersion}),e("div",{className:"author",children:e(Se,{})})]})]}),e("div",{className:"item-content",children:"Please tell your server owner to update the tablet to the latest version."})]})}),a.version===a.latestVersion&&i("div",{className:"up-to-date",children:[i("div",{className:"version",children:["V ",a==null?void 0:a.version]}),e("div",{className:"title",children:s("APPS.SETTINGS.UP_TO_DATE")})]})]})}const Se=()=>{const a="abcdefghijklmnopqrstuvwxyz".split("");return i(T,{children:[a[11].toUpperCase(),a[1].toUpperCase()]})};function ue({type:a}){return i(T,{children:[e("div",{style:{marginTop:"0.5rem"}}),e("section",{children:a==="Language"&&e(me,{})})]})}const me=()=>{const a=p(t),[l,r]=m.useState([]);return m.useEffect(()=>{b("getLocales",null,z).then(S=>{S&&r(S)})},[]),m.useEffect(()=>{Y(a.locale)},[a.locale]),e(T,{children:l.map((S,c)=>e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>t.set({...t.value,locale:S.locale}),children:i("div",{className:"setting",children:[S.locale===a.locale?e(L,{className:"checkmark"}):e(L,{className:"checkmark hidden"}),e("div",{className:"title",children:S.name})]})},c))})};function Ne(){var c,d;const a=p(t),l=p(k),[r,S]=m.useState(!1);return D("settings:back",()=>{r&&S(!1)}),e(R.div,{...M(r?"right":"left",r.toString(),.2),className:"settings-content",children:r?i("div",{className:"wallpapers-container",children:[e("div",{className:"wallpaper add",onClick:()=>{var N,h,o;w.Gallery.set({allowExternal:(o=(h=(N=k)==null?void 0:N.value)==null?void 0:h.AllowExternal)==null?void 0:o.Other,onSelect:P=>{t.patch({wallpaper:{...a.wallpaper,background:P.src}})}})},children:e(q,{})}),((c=a.wallpaper)==null?void 0:c.background.includes("http"))&&e("div",{className:"wallpaper active",style:{backgroundImage:`url(${(d=a.wallpaper)==null?void 0:d.background})`}}),Object.keys(l.Wallpapers).map((N,h)=>e(ve,{wallpaper:N,selected:a.wallpaper.background===N,cb:()=>{t.set({...t.value,wallpaper:{...t.value.wallpaper,background:N}})}},h))]}):e(he,{setExploringWallpapers:S})})}const ve=({wallpaper:a,selected:l,cb:r})=>{const[S,c]=m.useState("");return m.useEffect(()=>{U(a,d=>c(d))},[]),e("div",{className:`wallpaper ${l?"active":""}`,style:{backgroundImage:`url(${S})`},onClick:r})},he=({setExploringWallpapers:a})=>{var c;const l=p(t),[r,S]=m.useState(null);return m.useEffect(()=>{U(l.wallpaper.background,d=>S(d))},[l==null?void 0:l.wallpaper]),i("section",{children:[i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{g.set([...g.value,{name:"Wallpapers"}]),a(!0)},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.CHOOSE_NEW_WALLPAPER")})}),e("div",{className:"setting-value",children:e(G,{className:"chevron"})})]}),e("div",{className:"settings-item",children:i("div",{className:"wallpapers",children:[e("div",{className:"preview",style:{backgroundImage:r&&`url(${r})`},children:e("div",{className:"preview-lockscreen-container",children:e(K,{layout:((c=l==null?void 0:l.lockscreen)==null?void 0:c.layout)??1})})}),e("div",{className:"preview",style:{backgroundImage:r&&`url(${r})`},children:i("div",{className:"preview-homescreen-container",children:[e("div",{className:"preview-homescreen-apps",children:l.apps[1].filter(d=>!Z(d)).slice(0,24).map(d=>{var o;let N=k.value.apps[d],h=((o=N==null?void 0:N[d])==null?void 0:o.icon)??`./assets/img/icons/apps/${d}.jpg`;return i("div",{className:"settings-homescreen-app",children:[e("img",{src:h,onError:P=>P.currentTarget.src="./assets/img/icons/apps/unkown.png"}),e("div",{className:"app-name",children:d})]})})}),e("div",{className:"favourite-apps",children:l.apps[0].map(d=>e("div",{className:"settings-homescreen-app",children:e("img",{src:`./assets/img/icons/apps/${d}.jpg`})}))})]})})]})}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.BLUR_HOMESCREEN")})}),e("div",{className:"setting-value",children:e(C,{checked:l.wallpaper.blur,onChange:()=>{t.set({...t.value,wallpaper:{...l.wallpaper,blur:!l.wallpaper.blur}})}})})]})]})};function pe(){var N,h,o,P;const a=p(k),l=p(t),[r,S]=m.useState(!1),[c,d]=m.useState(null);return D("settings:back",()=>{r&&(S(!1),d(null))}),i(R.div,{...M(r?"right":"left",r.toString(),.2),className:"settings-content",children:[e("div",{style:{marginTop:"0.5rem"}}),r?e(T,{children:i("section",{children:[i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.ALLOW_NOTIFICATIONS")})}),e("div",{className:"setting-value",children:e(C,{onChange:()=>{var v,u,E;t.set({...t.value,notifications:{...l.notifications,[c]:{...(v=l.notifications)==null?void 0:v[c],enabled:!((E=(u=l.notifications)==null?void 0:u[c])!=null&&E.enabled)}}})},checked:((h=(N=l.notifications)==null?void 0:N[c])==null?void 0:h.enabled)??!0})})]}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.SOUNDS")})}),e("div",{className:"setting-value",children:e(C,{onChange:()=>{var v,u,E;t.set({...t.value,notifications:{...l.notifications,[c]:{...(v=l.notifications)==null?void 0:v[c],sound:!((E=(u=l.notifications)==null?void 0:u[c])!=null&&E.sound)}}})},checked:((P=(o=l.notifications)==null?void 0:o[c])==null?void 0:P.sound)??!0})})]})]})}):i(T,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.NOTIFICATIONS")}),e("section",{style:{marginBottom:"4rem"},children:Object.keys(a.apps).filter(v=>{var u;return J(v)||((u=a.apps[v])==null?void 0:u.removable)===!1}).sort((v,u)=>s(`APP_NAMES.${v}`,null,a.apps[v].name).localeCompare(s(`APP_NAMES.${u}`,null,a.apps[u].name))).map((v,u)=>i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{d(v),S(!0),g.set([...g.value,{name:"Notifications"}])},children:[i("div",{className:"setting",children:[e("img",{src:a.apps[v].icon??`./assets/img/icons/apps/${v}.jpg`}),e("div",{className:"title",children:s(`APP_NAMES.${v}`,null,a.apps[v].name)})]}),e("div",{className:"setting-value",children:e(G,{className:"chevron"})})]},u))})]})]})}function ge(){p(k);const a=p(t);return m.useState(!1),e(T,{children:i(T,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.RINGTONE_VOLUME")}),e("section",{children:i("div",{className:"settings-item",children:[e(X,{}),e(F,{onChange:l=>{t.set({...t.value,sound:{...t.value.sound,volume:l}})},value:a.sound.volume,min:0,max:1,step:.05}),e(x,{})]})})]})})}const Pe=B(null),g=B([]);function Ee(){var E,y;const a=p(t),l=p(re),[r,S]=m.useState(""),[c,d]=m.useState(null),[N,h]=m.useState(null),o=p(g);let P=[[{name:s("APPS.SETTINGS.AIRPLANE_MODE"),description:s("APPS.SETTINGS.AIRPLANE_MODE_DESCRIPTION"),icon:e(Q,{className:"orange"}),switch:!0,value:a.airplaneMode,onChange:()=>{t.set({...t.value,airplaneMode:!a.airplaneMode})}},{name:s("APPS.SETTINGS.STREAMER_MODE"),description:s("APPS.SETTINGS.STREAMER_MODE_DESCRIPTION"),icon:e(ee,{className:"purple"}),switch:!0,value:a==null?void 0:a.streamerMode,onChange:()=>{t.set({...t.value,streamerMode:!a.streamerMode})}}],[{name:s("APPS.SETTINGS.NOTIFICATIONS"),description:s("APPS.SETTINGS.NOTIFICATIONS_DESCRIPTION"),icon:e(ae,{className:"red"}),options:e(pe,{})},{name:s("APPS.SETTINGS.SOUND_HAPTICS"),description:s("APPS.SETTINGS.SOUND_HAPTICS_DESCRIPTION"),icon:e(x,{className:"pink"}),options:e(ge,{})}],[{name:s("APPS.SETTINGS.GENERAL"),description:s("APPS.SETTINGS.GENERAL_DESCRIPTION"),icon:e(se,{className:"grey"}),options:[[{name:s("APPS.SETTINGS.ABOUT"),options:[[{name:s("APPS.SETTINGS.VERSION"),value:`V${a.version}`},{name:s("APPS.SETTINGS.MODEL_NAME"),value:"LB Tablet"},{name:s("APPS.SETTINGS.SERIAL_NUMBER"),value:"DSDWWWSSF3"},{name:s("APPS.SETTINGS.DEVELOPED_BY"),value:"Breze & Loaf Scripts"},{name:s("APPS.SETTINGS.PURCHASE_AT"),value:"https://lbscripts.com"}],[{name:s("APPS.SETTINGS.SONGS"),value:"0"},{name:s("APPS.SETTINGS.VIDEOS"),value:"0"},{name:s("APPS.SETTINGS.PHOTOS")},{name:s("APPS.SETTINGS.APPLICATIONS")},{name:s("APPS.SETTINGS.CAPACITY")},{name:s("APPS.SETTINGS.AVAILABLE")}]]},{name:s("APPS.SETTINGS.SOFTWARE_UPDATE"),options:e(de,{}),notification:a.version!==a.latestVersion&&1}],[{name:s("APPS.SETTINGS.DATE_TIME"),options:[[{name:s("APPS.SETTINGS.24_HOUR_TIME"),switch:!0,value:!a.time.twelveHourClock,id:"twelveHourClock",onChange:()=>{t.set({...t.value,time:{...a.time,twelveHourClock:!a.time.twelveHourClock}})}}],[{name:s("APPS.SETTINGS.SET_AUTOMATICALLY"),switch:!0,value:!0,disabled:!0},{name:s("APPS.SETTINGS.TIME_ZONE"),value:Intl.DateTimeFormat().resolvedOptions().timeZone??"Unknown"}]]},{name:s("APPS.SETTINGS.LANGUAGE_REGION"),options:[[{name:s("APPS.SETTINGS.LANGUAGE"),value:s("LABEL"),options:e(ue,{type:"Language"})}]]}],[{name:s("APPS.SETTINGS.RESET_POPUP.TITLE"),onClick:()=>{w.PopUp.set({title:s("APPS.SETTINGS.RESET_POPUP.TITLE"),description:s("APPS.SETTINGS.RESET_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.RESET_POPUP.CANCEL")},{title:s("APPS.SETTINGS.RESET_POPUP.CONFIRM"),color:"red",cb:()=>b("factoryReset")}]})}}]]},{name:s("APPS.SETTINGS.DISPLAY_BRIGHTNESS"),description:s("APPS.SETTINGS.DISPLAY_BRIGHTNESS_DESCRIPTION"),icon:e(ne,{className:"blue"}),options:e(oe,{})},{name:s("APPS.SETTINGS.WALLPAPER"),description:s("APPS.SETTINGS.WALLPAPER_DESCRIPTION"),icon:e(ie,{className:"lightblue"}),options:e(Ne,{})},{name:s("APPS.SETTINGS.BATTERY"),description:s("APPS.SETTINGS.BATTERY_DESCRIPTION"),icon:e(te,{className:"green"})}]];const v=m.useRef(!0),u=m.useRef(!1);return m.useEffect(()=>{if(v.current){v.current=!1;return}O("info","Settings changes detected",t.value),u!=null&&u.current||(O("info","Settings","Changes detected, saving settings",t.value),u.current=!0)},[a]),m.useEffect(()=>()=>{u!=null&&u.current&&(O("info","Settings","Changes detected, saving settings",t.value),b("setSettings",t.value),u.current=!1)},[l==null?void 0:l.active]),i("div",{className:"settings-container",children:[i("div",{className:"settings-sidebar",children:[e("div",{className:"settings-header",children:e("div",{className:"title",children:s("APPS.SETTINGS.TITLE")})}),i("div",{className:"settings-content",children:[e(le,{placeholder:s("SEARCH"),onChange:I=>S(I.target.value)}),i("div",{className:"profile",children:[e("div",{className:"avatar",children:"LB"}),i("div",{className:"profile-info",children:[e("div",{className:"name",children:"LB"}),e("div",{className:"info",children:s("APPS.SETTINGS.CLOUD_BACKUP")})]}),e(G,{className:"chevron"})]}),P.map((I,A)=>e("section",{"data-last":A===P.length-1,children:I.map((n,f)=>i("div",{className:"settings-item","data-clickable":!!(n.options||n.onClick),onClick:()=>{if(n.onClick)return n.onClick();n.options&&(d(n.options),h(n.name),g.reset())},children:[i("div",{className:"setting",children:[n.icon&&(typeof n.icon=="string"?e("img",{src:n.icon}):n.icon),i("div",{className:"setting-info",children:[e("div",{className:"title",children:n.name}),n.description&&e("div",{className:"description",children:n.description})]})]}),n.notification&&e("div",{className:"settings-notification",children:n.notification}),i("div",{className:"setting-value",children:[n.switch&&e(C,{onChange:n.onChange,checked:n.value,disabled:n.disabled??!1}),n.value&&!n.switch&&e("div",{className:"value",children:n.value}),n.options&&e(G,{className:"chevron"})]})]},f))},A))]})]}),i("main",{className:"settings-body",children:[i("div",{className:"settings-header",children:[e("div",{className:"back",onClick:()=>{var I,A,n,f;(I=o==null?void 0:o[o.length-1])!=null&&I.page&&(d((A=o==null?void 0:o[o.length-1])==null?void 0:A.page),h((n=o==null?void 0:o[o.length-1])==null?void 0:n.name)),(f=o==null?void 0:o[o.length-1])!=null&&f.name?(window.postMessage({action:"settings:back"}),h(null),g.set(g.value.slice(0,g.value.length-1))):(d(null),h(null))},children:(((E=o==null?void 0:o[o.length-1])==null?void 0:E.name)||c)&&i(T,{children:[e(ce,{}),((y=o==null?void 0:o[o.length-1])==null?void 0:y.name)??"Settings"]})}),e("div",{className:"title",children:N??""}),e("div",{})]}),c&&e(R.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{x:100,opacity:0},transition:{duration:.2},className:"settings-content",children:m.isValidElement(c)?c:c.map((I,A)=>e("section",{"data-last":A===P.length-1,children:I.map((n,f)=>i("div",{className:"settings-item","data-clickable":!!(n.options||n.onClick),onClick:()=>{if(n.onClick)return n.onClick();n.options&&(d(n.options),h(n.name),g.set([...g.value,{name:N,page:c}]))},children:[i("div",{className:"setting",children:[n.icon&&(typeof n.icon=="string"?e("img",{src:n.icon}):n.icon),e("div",{className:"title",children:n.name})]}),n.notification&&e("div",{className:"settings-notification",children:"1"}),i("div",{className:"setting-value",children:[n.switch&&e(C,{onChange:n.onChange,checked:n.value,disabled:n.disabled??!1}),n.value&&!n.switch&&e("div",{className:"value",children:n.value}),n.options&&e(G,{className:"chevron"})]})]},f))},A))},N)]})]})}export{Pe as Header,g as SettingsHistory,Ee as default};
